on:
  pull_request:
    branches:
      - main-temporary
    types: [closed]
jobs:
  bump-version:
    if: github.event.pull_request.merged == true
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: print if dummy secret dummy secret
        run: echo length of dummy secret is ${{ secrets.BS_TEST_SECRET == 'lolz' }}
      - name: configure git pretty please
        run: |
          git remote set-url origin https://itsalaidbacklife:${{ secrets.GH_PUSH_TOKEN }}@github.com/cuttle-cards/cuttle
          git config --global user.name "Cuttle Continuous Integration"
          git config --global user.email "itsalaidbacklife@gmail.com"
      - name: bump major version
        if: contains(github.event.pull_request.labels.*.name, 'version-major')
        run: npm run version:major
      - name: bump minor version
        if: contains(github.event.pull_request.labels.*.name, 'version-minor')
        run: npm run version:minor
      - name: bump patch version
        if: contains(github.event.pull_request.labels.*.name, 'version-patch')
        run: npm run version:patch
      - name: push
        run: git push origin main-temporary
